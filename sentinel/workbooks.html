<!DOCTYPE html>
<html lang="en" data-theme="dark" data-platform="sentinel">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workbooks | Nik's SIEM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
                <aside class="sidebar">
            <div class="sidebar-header">
                <a href="../index.html" class="sidebar-brand">
                    <div class="brand-icon"><i class="fas fa-shield-halved"></i></div>
                    <div class="brand-text">
                        <span class="brand-title">Nik's SIEM</span>
                        <span class="brand-subtitle">SIEM Reference Guide</span>
                    </div>
                </a>
            </div>

            <div class="platform-selector">
                <div class="platform-tabs">
                    <a href="../xsiam/index.html" class="platform-tab xsiam"><i class="fas fa-fire"></i> XSIAM</a>
                    <a href="../sentinel/index.html" class="platform-tab sentinel active"><i class="fas fa-shield-alt"></i> Sentinel</a>
                    <a href="../splunk/index.html" class="platform-tab splunk"><i class="fas fa-search"></i> Splunk</a>
                    <a href="../mde/index.html" class="platform-tab mde"><i class="fas fa-desktop"></i> MDE</a>
                </div>
            </div>
<nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Getting Started</div>
                    <a href="index.html" class="nav-link"><i class="fas fa-home"></i> Overview</a>
                    <a href="architecture.html" class="nav-link"><i class="fas fa-sitemap"></i> Architecture</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Data Collection</div>
                    <a href="data-connectors.html" class="nav-link"><i class="fas fa-plug"></i> Data Connectors</a>
                    <a href="dcr-dce-guide.html" class="nav-link"><i class="fas fa-cogs"></i> DCR & DCE Deep Dive</a>
                    <a href="event-hub.html" class="nav-link"><i class="fas fa-broadcast-tower"></i> Event Hub Integration</a>
                    <a href="data-ingestion.html" class="nav-link"><i class="fas fa-database"></i> Ingestion & Cost</a>
                    <a href="parsing-flows.html" class="nav-link"><i class="fas fa-stream"></i> Parsing Flows</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">KQL Query Language</div>
                    <a href="kql-fundamentals.html" class="nav-link"><i class="fas fa-terminal"></i> KQL Fundamentals</a>
                    <a href="kql-intermediate.html" class="nav-link"><i class="fas fa-layer-group"></i> KQL Intermediate</a>
                    <a href="kql-advanced.html" class="nav-link"><i class="fas fa-code"></i> Advanced KQL</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Detection & Response</div>
                    <a href="analytics-rules.html" class="nav-link"><i class="fas fa-bell"></i> Analytics Rules</a>
                    <a href="automation.html" class="nav-link"><i class="fas fa-robot"></i> Automation</a>
                    <a href="workbooks.html" class="nav-link active"><i class="fas fa-chart-bar"></i> Workbooks</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Content & Intelligence</div>
                    <a href="content-hub.html" class="nav-link"><i class="fas fa-cube"></i> Content Hub & ASIM</a>
                    <a href="threat-intel.html" class="nav-link"><i class="fas fa-crosshairs"></i> Threat Intelligence</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Reference</div>
                    <a href="enterprise-scenarios.html" class="nav-link"><i class="fas fa-building"></i> Enterprise Scenarios</a>
                    <a href="soc-operations.html" class="nav-link"><i class="fas fa-users-cog"></i> SOC Operations</a>
                </div>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <div class="main-wrapper">
            <header class="top-bar">
                <div class="breadcrumb">
                    <a href="../index.html">Home</a>
                    <span class="separator">/</span>
                    <a href="index.html">Sentinel</a>
                    <span class="separator">/</span>
                    <span class="current">Workbooks</span>
                </div>
                <div class="top-actions">
                    <button class="top-btn" onclick="window.print()">
                        <i class="fas fa-print"></i> Print
                    </button>
                </div>
            </header>
            
            <main class="main-content">
                <section class="content-section">


                <h2>What Are Workbooks?</h2>
                <p>Workbooks are interactive reports and dashboards built on KQL queries. They visualize security data for monitoring, investigation, and reporting.</p>

                <h3>Workbook Types</h3>
                <table>
                    <thead><tr><th>Type</th><th>Description</th><th>Use Case</th></tr></thead>
                    <tbody>
                        <tr>
                            <td><strong>Built-in Templates</strong></td>
                            <td>Pre-built workbooks from Content Hub</td>
                            <td>Quick start for common data sources</td>
                        </tr>
                        <tr>
                            <td><strong>Custom Workbooks</strong></td>
                            <td>Created from scratch</td>
                            <td>Organization-specific needs</td>
                        </tr>
                        <tr>
                            <td><strong>Investigation Workbooks</strong></td>
                            <td>Deep-dive into specific incidents</td>
                            <td>User investigation, IP analysis</td>
                        </tr>
                    </tbody>
                </table>

                <h2>Creating a Workbook</h2>
                <div class="step-container">
                    <div class="step">
                        <div class="step-indicator"><div class="step-number-badge">1</div></div>
                        <div class="step-content">
                            <div class="step-title">Start from Template or Blank</div>
                            <p>Sentinel → Workbooks → Add workbook (or use template)</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-indicator"><div class="step-number-badge">2</div></div>
                        <div class="step-content">
                            <div class="step-title">Add Parameters</div>
                            <p>Time range picker, subscription selector, filters</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-indicator"><div class="step-number-badge">3</div></div>
                        <div class="step-content">
                            <div class="step-title">Add Query Elements</div>
                            <p>KQL queries with visualization (chart, grid, tile)</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-indicator"><div class="step-number-badge">4</div></div>
                        <div class="step-content">
                            <div class="step-title">Configure Visualizations</div>
                            <p>Choose chart type, colors, labels, thresholds</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-indicator"><div class="step-number-badge">5</div></div>
                        <div class="step-content">
                            <div class="step-title">Save and Share</div>
                            <p>Save to resource group, share with team</p>
                        </div>
                    </div>
                </div>

                <h2>Visualization Types</h2>
                <table>
                    <thead><tr><th>Type</th><th>Best For</th><th>Example</th></tr></thead>
                    <tbody>
                        <tr><td><strong>Tile</strong></td><td>Single metric display</td><td>Total incidents today</td></tr>
                        <tr><td><strong>Grid/Table</strong></td><td>Detailed data listing</td><td>Recent alerts list</td></tr>
                        <tr><td><strong>Bar Chart</strong></td><td>Categorical comparison</td><td>Incidents by severity</td></tr>
                        <tr><td><strong>Time Chart</strong></td><td>Trends over time</td><td>Alerts per hour</td></tr>
                        <tr><td><strong>Pie/Donut</strong></td><td>Proportions</td><td>Alert distribution by type</td></tr>
                        <tr><td><strong>Map</strong></td><td>Geographic data</td><td>Attack sources by country</td></tr>
                        <tr><td><strong>Heatmap</strong></td><td>Activity patterns</td><td>Login activity by hour/day</td></tr>
                    </tbody>
                </table>

                <h2>Example Workbook Queries</h2>

                <h3>SOC Overview Dashboard</h3>
                <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); font-family: var(--font-mono); font-size: 0.75rem;">
<pre style="margin: 0;"><span style="color: #6aa3f7;">// Tile: Open Incidents Count</span>
SecurityIncident
| where Status != "Closed"
| summarize OpenIncidents = count()

<span style="color: #6aa3f7;">// Bar Chart: Incidents by Severity</span>
SecurityIncident
| where TimeGenerated > ago(7d)
| summarize Count = count() by Severity
| order by case(Severity, "High", 1, "Medium", 2, "Low", 3, "Informational", 4, 5)

<span style="color: #6aa3f7;">// Time Chart: Alerts Over Time</span>
SecurityAlert
| where TimeGenerated > ago(24h)
| summarize AlertCount = count() by bin(TimeGenerated, 1h)
| render timechart

<span style="color: #6aa3f7;">// Grid: Recent High Severity Incidents</span>
SecurityIncident
| where Severity == "High"
| where TimeGenerated > ago(7d)
| project TimeGenerated, Title, Status, Owner = Owner.assignedTo
| order by TimeGenerated desc
| take 10</pre>
                </div>

                <h3>Authentication Monitoring</h3>
                <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); font-family: var(--font-mono); font-size: 0.75rem;">
<pre style="margin: 0;"><span style="color: #6aa3f7;">// Failed Logins by User</span>
SigninLogs
| where TimeGenerated > ago({TimeRange})
| where ResultType != 0
| summarize FailedLogins = count() by UserPrincipalName
| order by FailedLogins desc
| take 10

<span style="color: #6aa3f7;">// Login Locations Map</span>
SigninLogs
| where TimeGenerated > ago(24h)
| where ResultType == 0
| summarize LoginCount = count() by Location
| order by LoginCount desc

<span style="color: #6aa3f7;">// Risky Sign-ins</span>
SigninLogs
| where RiskLevelDuringSignIn in ("high", "medium")
| project TimeGenerated, UserPrincipalName, RiskLevelDuringSignIn, Location, IPAddress
| order by TimeGenerated desc</pre>
                </div>

                <h2>Parameters</h2>
                <p>Parameters make workbooks interactive and reusable.</p>

                <h3>Common Parameter Types</h3>
                <table>
                    <thead><tr><th>Type</th><th>Use</th><th>Example</th></tr></thead>
                    <tbody>
                        <tr><td><strong>Time Range</strong></td><td>Filter by time period</td><td>Last 24 hours, Last 7 days</td></tr>
                        <tr><td><strong>Drop Down</strong></td><td>Select from list</td><td>Severity: High, Medium, Low</td></tr>
                        <tr><td><strong>Text</strong></td><td>Free-form input</td><td>Username to search</td></tr>
                        <tr><td><strong>Resource</strong></td><td>Select Azure resource</td><td>Log Analytics workspace</td></tr>
                    </tbody>
                </table>

                <h3>Using Parameters in Queries</h3>
                <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: var(--radius-md); font-family: var(--font-mono); font-size: 0.8rem;">
<pre style="margin: 0;"><span style="color: #6aa3f7;">// Time range parameter: {TimeRange}</span>
SecurityAlert
| where TimeGenerated > ago({TimeRange})
| summarize count()

<span style="color: #6aa3f7;">// Dropdown parameter: {Severity}</span>
SecurityIncident
| where Severity == "{Severity}"
| summarize count()

<span style="color: #6aa3f7;">// Multi-select with "in" operator</span>
SecurityIncident
| where Severity in ({Severities})
| summarize count()</pre>
                </div>

                <h2>Recommended Built-in Workbooks</h2>
                <table>
                    <thead><tr><th>Workbook</th><th>Data Source</th><th>What It Shows</th></tr></thead>
                    <tbody>
                        <tr><td><strong>Azure AD Sign-in Logs</strong></td><td>Azure AD</td><td>Authentication activity, failures, risky sign-ins</td></tr>
                        <tr><td><strong>Microsoft Defender for Cloud</strong></td><td>Defender</td><td>Security recommendations, alerts</td></tr>
                        <tr><td><strong>Security Operations Efficiency</strong></td><td>Sentinel</td><td>MTTD, MTTR, incident metrics</td></tr>
                        <tr><td><strong>Insecure Protocols</strong></td><td>Various</td><td>Legacy auth, insecure connections</td></tr>
                        <tr><td><strong>Investigation Insights</strong></td><td>Various</td><td>Entity investigation dashboard</td></tr>
                    </tbody>
                </table>

                <h2>Best Practices</h2>
                <ul>
                    <li><strong>Use parameters:</strong> Make workbooks flexible and reusable</li>
                    <li><strong>Optimize queries:</strong> Large workbooks can be slow</li>
                    <li><strong>Use templates:</strong> Start from built-in, customize as needed</li>
                    <li><strong>Document:</strong> Add text elements explaining visualizations</li>
                    <li><strong>Test performance:</strong> Check load times with realistic time ranges</li>
                    <li><strong>Version control:</strong> Export JSON and store in Git</li>
                </ul>

            
                </section>
            
                <section class="content-section">
                    <h2><i class="fas fa-user-tie"></i> Interview Preparation</h2>
                    
                    <div class="interview-box">
                        <div class="interview-question">
                            <i class="fas fa-question-circle"></i>
                            <span>What are workbooks in Sentinel and how do you use them?</span>
                        </div>
                        <div class="interview-answer">
                            <p>Workbooks are interactive dashboards built on Azure Monitor Workbooks. They combine KQL queries with visualizations - charts, tables, maps, tiles - to create operational views of your security data.</p>
                            <p>Out-of-the-box workbooks come with Content Hub solutions - things like Azure AD Sign-in analysis, Security Alerts overview, Threat Intelligence dashboard. These are templates you save as instances that you can customize.</p>
                            <p>Custom workbooks let you build dashboards for your specific needs. You add query steps with KQL, choose visualization types, add parameters for interactivity like time range pickers or dropdown filters.</p>
                            <p>Key use cases: <strong>SOC operational dashboards</strong> showing incident trends and analyst metrics, <strong>compliance reporting</strong> with specific data views, <strong>investigation aids</strong> that let analysts drill down into specific entities.</p>
                            <p>Pro tip: workbooks can span multiple workspaces and even non-Sentinel Log Analytics workspaces, useful for consolidating views across environments.</p>
                        </div>
                    </div>
                </section>

            </main>
            
            <footer class="content-footer">
                <div class="footer-content">
                    <p>Nik's SIEM - Microsoft Sentinel Guide</p>
                    <p>Personal Reference Guide</p>
                </div>
            </footer>
        </div>
    </div>
    
    <script src="../assets/js/main.js"></script>
</body>
</html>